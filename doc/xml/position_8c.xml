<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.6.3">
  <compounddef id="position_8c" kind="file">
    <compoundname>position.c</compoundname>
    <includes refid="_a_l_types_8h" local="yes">ALTypes.h</includes>
    <includes local="yes">math.h</includes>
    <includes refid="quadrature_encoder_8h" local="yes">quadratureEncoder.h</includes>
    <includes refid="config_8h" local="yes">config.h</includes>
    <includes refid="position_8h" local="yes">position.h</includes>
    <incdepgraph>
      <node id="1213">
        <label>asserv2010/position.c</label>
        <link refid="position.c"/>
        <childnode refid="1214" relation="include">
        </childnode>
        <childnode refid="1215" relation="include">
        </childnode>
        <childnode refid="1216" relation="include">
        </childnode>
        <childnode refid="1217" relation="include">
        </childnode>
        <childnode refid="1219" relation="include">
        </childnode>
      </node>
      <node id="1219">
        <label>position.h</label>
        <link refid="position_8h"/>
      </node>
      <node id="1216">
        <label>quadratureEncoder.h</label>
        <link refid="quadrature_encoder_8h"/>
      </node>
      <node id="1218">
        <label>trajectory.h</label>
        <link refid="trajectory_8h"/>
        <childnode refid="1214" relation="include">
        </childnode>
      </node>
      <node id="1215">
        <label>math.h</label>
      </node>
      <node id="1214">
        <label>ALTypes.h</label>
        <link refid="_a_l_types_8h"/>
      </node>
      <node id="1217">
        <label>config.h</label>
        <link refid="config_8h"/>
        <childnode refid="1214" relation="include">
        </childnode>
        <childnode refid="1218" relation="include">
        </childnode>
      </node>
    </incdepgraph>
      <sectiondef kind="func">
      <memberdef kind="function" id="position_8c_1af26a3b28c044ab6a3bbfbcdff1bc2518" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void calcul_position</definition>
        <argsstring>(void)</argsstring>
        <name>calcul_position</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/thomas/Programmation/utcoupe/2011/utcoupe-mega/asserv2010/position.c" line="8" bodyfile="/home/thomas/Programmation/utcoupe/2011/utcoupe-mega/asserv2010/position.c" bodystart="7" bodyend="44"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_a_l_types_8h" kindref="compound">ALTypes.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;math.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="quadrature_encoder_8h" kindref="compound">quadratureEncoder.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="config_8h" kindref="compound">config.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="position_8h" kindref="compound">position.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight></codeline>
<codeline lineno="7" refid="position_8h_1af671c4a8d5f275858e38f97241719e3a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="position_8c_1af26a3b28c044ab6a3bbfbcdff1bc2518" kindref="member">calcul_position</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="8"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9"><highlight class="normal"><sp/><sp/><ref refid="structrobot" kindref="compound">robot</ref><sp/>*<sp/>Robot;<sp/><sp/></highlight></codeline>
<codeline lineno="10"><highlight class="normal"><sp/><sp/><ref refid="structrobot" kindref="compound">robot</ref><sp/>*<sp/><ref refid="config_8c_1a579f1aec865cc117f44a053e363a7549" kindref="member">RobotLast</ref>;<sp/></highlight></codeline>
<codeline lineno="11"><highlight class="normal"><sp/><sp/><ref refid="struct_joint_config" kindref="compound">JointConfig</ref>*<sp/>jointGauche;</highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><ref refid="struct_joint_config" kindref="compound">JointConfig</ref>*<sp/>jointDroite;</highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>config<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/>jointGauche<sp/>=<sp/><ref refid="config_8c_1afd26fdfe7f8e112d2805849f5358b27f" kindref="member">oGetJointConfig</ref>(<ref refid="config_8h_1af07f8bf974fdf76afd17f2b97ac15a22" kindref="member">GAUCHE</ref>);</highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/>jointDroite<sp/>=<sp/><ref refid="config_8c_1afd26fdfe7f8e112d2805849f5358b27f" kindref="member">oGetJointConfig</ref>(<ref refid="config_8h_1af625d3f3bc022848a558f2b18def5b15" kindref="member">DROITE</ref>);</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/>Robot<sp/>=<sp/><ref refid="config_8c_1a1620e709da932be9c3f2fff78ecf50e3" kindref="member">getRobot</ref>();</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/>RobotLast<sp/>=<sp/><ref refid="config_8c_1ad995c80b8e2bfe4f2b8dc4228fb493f0" kindref="member">getRobotLast</ref>();<sp/><sp/></highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>jointDroite-&gt;<ref refid="struct_joint_config_1ac924dc2db109da5029b358be2c3fec75" kindref="member">position</ref><sp/>=<sp/><ref refid="quadrature_encoder_8c_1a13a7244d92502dceab0a604e881eb52e" kindref="member">getSoftwarePosQEI2</ref>();</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>jointGauche-&gt;<ref refid="struct_joint_config_1ac924dc2db109da5029b358be2c3fec75" kindref="member">position</ref><sp/>=<sp/><ref refid="quadrature_encoder_8c_1acd4a0514f107322212b6d00f0f53ea2c" kindref="member">getSoftwarePosQEI</ref>();</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>jointDroite-&gt;<ref refid="struct_joint_config_1a1a76e093b95a477700e2fd7a0721ae9f" kindref="member">speed</ref><sp/>=<sp/><sp/><sp/><sp/>jointDroite-&gt;<ref refid="struct_joint_config_1ac924dc2db109da5029b358be2c3fec75" kindref="member">position</ref><sp/><sp/>-<sp/>jointDroite-&gt;<ref refid="struct_joint_config_1a11ed95f40a458dd539ddfebc75959b24" kindref="member">lastPosition</ref>;</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>jointGauche-&gt;<ref refid="struct_joint_config_1a1a76e093b95a477700e2fd7a0721ae9f" kindref="member">speed</ref><sp/>=<sp/><sp/>jointGauche-&gt;<ref refid="struct_joint_config_1ac924dc2db109da5029b358be2c3fec75" kindref="member">position</ref><sp/><sp/>-<sp/>jointGauche-&gt;<ref refid="struct_joint_config_1a11ed95f40a458dd539ddfebc75959b24" kindref="member">lastPosition</ref>;</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>vitesse_rot=(float)(read32(DROITE,RVCourante)+read32(GAUCHE,RVCourante));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Calcul<sp/>de<sp/>la<sp/>vitesse<sp/>ponctuelle</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Robot-&gt;<ref refid="structrobot_1af44c2db40230064fd8239dfd1cca799c" kindref="member">speed</ref><sp/>=<sp/>(<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>jointDroite-&gt;<ref refid="struct_joint_config_1a1a76e093b95a477700e2fd7a0721ae9f" kindref="member">speed</ref><sp/>+<sp/><sp/><sp/><sp/>jointGauche-&gt;<ref refid="struct_joint_config_1a1a76e093b95a477700e2fd7a0721ae9f" kindref="member">speed</ref><sp/>)<sp/>/2.0;</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//Robot-&gt;acceleration<sp/>=<sp/>Robot-&gt;speed<sp/>-<sp/>RobotLast-&gt;speed;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//calcul<sp/>de<sp/>l&apos;orientation</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Robot-&gt;<ref refid="structrobot_1abc0768ef4ba84a1e5701fd071ffa9d6f" kindref="member">orientation</ref><sp/>=<sp/>Robot-&gt;<ref refid="structrobot_1a787011f82ee0b8d1c269f97d890410e4" kindref="member">orientation_initiale</ref><sp/>+<sp/>(float)(<sp/>jointGauche-&gt;<ref refid="struct_joint_config_1ac924dc2db109da5029b358be2c3fec75" kindref="member">position</ref><sp/>-<sp/>jointDroite-&gt;<ref refid="struct_joint_config_1ac924dc2db109da5029b358be2c3fec75" kindref="member">position</ref>)/Robot-&gt;<ref refid="structrobot_1a1a032a501f457b2b537b08ccc5e3af30" kindref="member">entraxe</ref>;</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>modulo<sp/>PI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(Robot-&gt;<ref refid="structrobot_1abc0768ef4ba84a1e5701fd071ffa9d6f" kindref="member">orientation</ref><sp/>&gt;<sp/><sp/><ref refid="_a_l_types_8h_1a598a3330b3c21701223ee0ca14316eca" kindref="member">PI</ref><sp/>)<sp/>Robot-&gt;<ref refid="structrobot_1abc0768ef4ba84a1e5701fd071ffa9d6f" kindref="member">orientation</ref><sp/>-=<sp/><ref refid="_a_l_types_8h_1a2a95859d7c6924f59afef24c2f3c20c9" kindref="member">PIx2</ref>;</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(Robot-&gt;<ref refid="structrobot_1abc0768ef4ba84a1e5701fd071ffa9d6f" kindref="member">orientation</ref><sp/>&lt;<sp/>-<ref refid="_a_l_types_8h_1a598a3330b3c21701223ee0ca14316eca" kindref="member">PI</ref><sp/>)<sp/>Robot-&gt;<ref refid="structrobot_1abc0768ef4ba84a1e5701fd071ffa9d6f" kindref="member">orientation</ref><sp/>+=<sp/><ref refid="_a_l_types_8h_1a2a95859d7c6924f59afef24c2f3c20c9" kindref="member">PIx2</ref>;</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/></highlight><highlight class="comment">//calcul<sp/>du<sp/>deplacement</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/>Robot-&gt;<ref refid="structrobot_1a5d839619db2bffea3a5ebbc12d7dd8d3" kindref="member">position</ref>.<ref refid="structpoint_1a8293fd2de3ce739deb6d53691fd21fcf" kindref="member">x</ref><sp/>+=<sp/>Robot-&gt;<ref refid="structrobot_1af44c2db40230064fd8239dfd1cca799c" kindref="member">speed</ref>*cosf(Robot-&gt;<ref refid="structrobot_1abc0768ef4ba84a1e5701fd071ffa9d6f" kindref="member">orientation</ref>);</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/>Robot-&gt;<ref refid="structrobot_1a5d839619db2bffea3a5ebbc12d7dd8d3" kindref="member">position</ref>.<ref refid="structpoint_1a616ad85a2096d1566f5971666bbc3b3f" kindref="member">y</ref><sp/>+=<sp/>-Robot-&gt;<ref refid="structrobot_1af44c2db40230064fd8239dfd1cca799c" kindref="member">speed</ref>*sinf(Robot-&gt;<ref refid="structrobot_1abc0768ef4ba84a1e5701fd071ffa9d6f" kindref="member">orientation</ref>);</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><ref refid="config_8c_1a2a3a4b17631927355bf220a65fc9d96b" kindref="member">updateJoints</ref>();</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><ref refid="config_8c_1a2f0c2c19c34d9311e70f16bab886a6f3" kindref="member">updateLastRobot</ref>();</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="44"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/home/thomas/Programmation/utcoupe/2011/utcoupe-mega/asserv2010/position.c"/>
  </compounddef>
</doxygen>
